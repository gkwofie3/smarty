# Generated by Django 5.2.1 on 2026-02-08 00:04

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Device',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('location', models.CharField(blank=True, max_length=255)),
                ('device_type', models.CharField(choices=[('AVR', 'AVR'), ('FIRE SYSTEM', 'Fire System'), ('ATS', 'ATS'), ('GENERATOR', 'Generator'), ('HVAC SYSTEM', 'HVAC System'), ('TRANSFORMER', 'Transformer'), ('UPS', 'UPS'), ('ENERGY METER', 'Energy Meter'), ('WATER METER', 'Water Meter'), ('LIFT', 'Lift'), ('LIGHTING CONTROL SYSTEM', 'Lighting Control System'), ('ACCESS CONTROL', 'Access Control'), ('SECURITY SYSTEM', 'Security System'), ('SURVEILLANCE SYSTEM', 'Surveillance System'), ('ENVIRONMENTAL SENSOR', 'Environmental Sensor'), ('UTILITY MANAGEMENT', 'Utility Management System'), ('GAS DETECTION SYSTEM', 'Gas Detection System'), ('PUMP CONTROLLER', 'Pump Controller'), ('VFD', 'VFD'), ('AUDIO VISUAL SYSTEM', 'Audio Visual System')], max_length=50)),
                ('is_online', models.BooleanField(default=False)),
                ('last_communication', models.DateTimeField(blank=True, null=True)),
                ('path', models.CharField(blank=True, max_length=255)),
                ('module_number', models.PositiveIntegerField(blank=True, null=True)),
                ('module_type', models.CharField(blank=True, max_length=100)),
                ('protocol', models.CharField(choices=[('Modbus', 'Modbus'), ('Bacnet', 'BACnet'), ('Mqtt', 'MQTT')], max_length=20)),
                ('slug', models.SlugField(unique=True)),
                ('ip_address', models.CharField(blank=True, default='127.0.0.1', max_length=50, null=True)),
                ('port_number', models.PositiveIntegerField(default=502)),
                ('slave_id', models.PositiveSmallIntegerField(default=1)),
                ('baud_rate', models.PositiveIntegerField(blank=True, choices=[(1200, '1200'), (2400, '2400'), (4800, '4800'), (9600, '9600'), (19200, '19200'), (38400, '38400'), (57600, '57600'), (115200, '115200')], null=True)),
                ('parity', models.CharField(choices=[('None', 'None'), ('Even', 'Even'), ('Odd', 'Odd')], default='Even', max_length=10)),
                ('stop_bits', models.PositiveSmallIntegerField(choices=[(1, '1'), (2, '2')], default=1)),
                ('bacnet_device_instance', models.PositiveIntegerField(blank=True, null=True)),
                ('bacnet_network_number', models.PositiveIntegerField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Device',
                'verbose_name_plural': 'Devices',
            },
        ),
        migrations.CreateModel(
            name='PointGroup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('slug', models.SlugField(blank=True, max_length=255, unique=True)),
                ('description', models.TextField(blank=True)),
                ('device_type', models.CharField(blank=True, choices=[('AVR', 'AVR'), ('FIRE SYSTEM', 'Fire System'), ('ATS', 'ATS'), ('GENERATOR', 'Generator'), ('HVAC SYSTEM', 'HVAC System'), ('TRANSFORMER', 'Transformer'), ('UPS', 'UPS'), ('ENERGY METER', 'Energy Meter'), ('WATER METER', 'Water Meter'), ('LIFT', 'Lift'), ('LIGHTING CONTROL SYSTEM', 'Lighting Control System'), ('ACCESS CONTROL', 'Access Control'), ('SECURITY SYSTEM', 'Security System'), ('SURVEILLANCE SYSTEM', 'Surveillance System'), ('ENVIRONMENTAL SENSOR', 'Environmental Sensor'), ('UTILITY MANAGEMENT', 'Utility Management System'), ('GAS DETECTION SYSTEM', 'Gas Detection System'), ('PUMP CONTROLLER', 'Pump Controller'), ('VFD', 'VFD'), ('AUDIO VISUAL SYSTEM', 'Audio Visual System')], max_length=50, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('order', models.PositiveIntegerField(blank=True, unique=True)),
            ],
            options={
                'verbose_name': 'Point Group',
                'verbose_name_plural': 'Point Groups',
                'ordering': ['order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Register',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True)),
                ('address', models.PositiveIntegerField(default=0)),
                ('read_function_code', models.CharField(choices=[('01', '01 - Read Coils'), ('02', '02 - Read Discrete Inputs'), ('03', '03 - Read Holding Registers'), ('04', '04 - Read Input Registers'), ('05', '05 - Write Single Coil'), ('06', '06 - Write Single Register'), ('15', '15 - Write Multiple Coils'), ('16', '16 - Write Multiple Registers')], default='04', max_length=10)),
                ('write_function_code', models.CharField(choices=[('01', '01 - Read Coils'), ('02', '02 - Read Discrete Inputs'), ('03', '03 - Read Holding Registers'), ('04', '04 - Read Input Registers'), ('05', '05 - Write Single Coil'), ('06', '06 - Write Single Register'), ('15', '15 - Write Multiple Coils'), ('16', '16 - Write Multiple Registers')], default='06', max_length=10)),
                ('signal_type', models.CharField(choices=[('Digital', 'Digital'), ('Analog', 'Analog'), ('Pulse', 'Pulse'), ('Multistate', 'Multistate')], default='Digital', max_length=20)),
                ('direction', models.CharField(choices=[('Input', 'Input'), ('Output', 'Output')], default='Input', max_length=10)),
                ('current_value', models.CharField(blank=True, max_length=255)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('last_communication', models.DateTimeField(blank=True, null=True)),
                ('data_type', models.CharField(choices=[('Integer', 'Integer'), ('Float', 'Float'), ('Real', 'Real'), ('Boolean', 'Boolean')], default='Real', max_length=20)),
                ('is_single_bit', models.BooleanField(default=False)),
                ('is_writeable', models.BooleanField(default=True)),
                ('count', models.BigIntegerField(default=0)),
                ('offset_before_gain', models.BooleanField(default=False)),
                ('gain', models.FloatField(default=1.0)),
                ('offset', models.FloatField(default=0.0)),
                ('is_active', models.BooleanField(default=True)),
                ('is_isolated', models.BooleanField(default=False)),
                ('error_status', models.CharField(choices=[('OK', 'OK'), ('FAULT', 'Hardware Fault'), ('COMM_ERROR', 'Communication Error'), ('RANGE_ERROR', 'Out of Range')], default='OK', max_length=20)),
                ('error_message', models.TextField(blank=True)),
                ('can_be_faulty', models.BooleanField(default=False)),
                ('faulty_value', models.BooleanField(blank=True, null=True)),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='registers', to='devices.device')),
            ],
            options={
                'verbose_name': 'Register',
                'verbose_name_plural': 'Registers',
            },
        ),
        migrations.CreateModel(
            name='Point',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('slug', models.SlugField(blank=True, max_length=255)),
                ('description', models.TextField(blank=True, null=True)),
                ('point_type', models.CharField(choices=[('REGISTER', 'Register Value'), ('VARIABLE', 'Variable Display'), ('DATA', 'Data')], default='REGISTER', max_length=20)),
                ('direction', models.CharField(choices=[('Input', 'Input'), ('Output', 'Output')], default='Input', max_length=10)),
                ('is_active', models.BooleanField(default=True)),
                ('frequency', models.FloatField(default=1.0)),
                ('is_isolated', models.BooleanField(default=False)),
                ('data_type', models.CharField(choices=[('Integer', 'Integer'), ('Float', 'Float'), ('Real', 'Real'), ('Boolean', 'Boolean'), ('String', 'String'), ('List', 'List'), ('Object', 'Object')], default='Real', max_length=20)),
                ('bit_size', models.PositiveSmallIntegerField(default=16)),
                ('bit', models.PositiveIntegerField(blank=True, default=0, null=True)),
                ('is_single_bit', models.BooleanField(default=False)),
                ('is_writeable', models.BooleanField(default=True)),
                ('is_forced', models.BooleanField(default=False)),
                ('forced_value', models.CharField(blank=True, max_length=255, null=True)),
                ('gain', models.FloatField(default=1.0)),
                ('offset', models.FloatField(default=0.0)),
                ('offset_before_gain', models.BooleanField(default=False)),
                ('decimal_places', models.PositiveSmallIntegerField(default=2)),
                ('unit', models.CharField(blank=True, max_length=50)),
                ('range_min', models.FloatField(default=4.0)),
                ('range_max', models.FloatField(default=20.0)),
                ('scale_min', models.FloatField(default=0.0)),
                ('scale_max', models.FloatField(default=100.0)),
                ('threshold_high', models.FloatField(default=100.0)),
                ('threshold_low', models.FloatField(default=0.0)),
                ('pulse_width', models.FloatField(blank=True, null=True)),
                ('can_be_faulty', models.BooleanField(default=False)),
                ('faulty_value', models.BooleanField(blank=True, null=True)),
                ('read_value', models.CharField(blank=True, max_length=255)),
                ('write_value', models.CharField(blank=True, max_length=255)),
                ('json_data', models.JSONField(blank=True, null=True)),
                ('error_status', models.CharField(choices=[('OK', 'OK'), ('FAULT', 'Hardware Fault'), ('COMM_ERROR', 'Communication Error'), ('RANGE_ERROR', 'Out of Range')], default='OK', max_length=20)),
                ('error_message', models.TextField(blank=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('last_communication', models.DateTimeField(blank=True, null=True)),
                ('point_group', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='points', to='devices.pointgroup')),
                ('register', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='io_points', to='devices.register')),
            ],
            options={
                'verbose_name': 'Point',
                'verbose_name_plural': 'Points',
                'ordering': ['name'],
                'constraints': [models.UniqueConstraint(fields=('name', 'point_group'), name='unique_point_name_per_group'), models.UniqueConstraint(fields=('slug', 'point_group'), name='unique_point_slug_per_group')],
            },
        ),
    ]
